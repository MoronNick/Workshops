<!-- Copy and paste the converted output. -->

<!-----

You have some errors, warnings, or alerts. If you are using reckless mode, turn it off to see inline alerts.
* ERRORs: 0
* WARNINGs: 1
* ALERTS: 177

Conversion time: 49.264 seconds.


Using this Markdown file:

1. Paste this output into your source file.
2. See the notes and action items below regarding this conversion run.
3. Check the rendered output (headings, lists, code blocks, tables) for proper
   formatting and use a linkchecker before you publish this page.

Conversion notes:

* Docs to Markdown version 1.0β36
* Mon Jun 17 2024 11:00:58 GMT-0700 (PDT)
* Source doc: CloudVision Mastery Workshop Lab Guide

WARNING:
Inline drawings not supported: look for ">>>>>  gd2md-html alert:  inline drawings..." in output.

* Tables are currently converted to HTML tables.
* This document has images: check for >>>>>  gd2md-html alert:  inline image link in generated source and store images to your server. NOTE: Images in exported zip file from Google Docs may not appear in  the same order as they do in your doc. Please check the images!


WARNING:
You have 13 H1 headings. You may want to use the "H1 -> H2" option to demote all headings by one level.

----->


<p style="color: red; font-weight: bold">>>>>>  gd2md-html alert:  ERRORs: 0; WARNINGs: 2; ALERTS: 177.</p>
<ul style="color: red; font-weight: bold"><li>See top comment block for details on ERRORs and WARNINGs. <li>In the converted Markdown or HTML, search for inline alerts that start with >>>>>  gd2md-html alert:  for specific instances that need correction.</ul>

<p style="color: red; font-weight: bold">Links to alert messages:</p><a href="#gdcalert1">alert1</a>
<a href="#gdcalert2">alert2</a>
<a href="#gdcalert3">alert3</a>
<a href="#gdcalert4">alert4</a>
<a href="#gdcalert5">alert5</a>
<a href="#gdcalert6">alert6</a>
<a href="#gdcalert7">alert7</a>
<a href="#gdcalert8">alert8</a>
<a href="#gdcalert9">alert9</a>
<a href="#gdcalert10">alert10</a>
<a href="#gdcalert11">alert11</a>
<a href="#gdcalert12">alert12</a>
<a href="#gdcalert13">alert13</a>
<a href="#gdcalert14">alert14</a>
<a href="#gdcalert15">alert15</a>
<a href="#gdcalert16">alert16</a>
<a href="#gdcalert17">alert17</a>
<a href="#gdcalert18">alert18</a>
<a href="#gdcalert19">alert19</a>
<a href="#gdcalert20">alert20</a>
<a href="#gdcalert21">alert21</a>
<a href="#gdcalert22">alert22</a>
<a href="#gdcalert23">alert23</a>
<a href="#gdcalert24">alert24</a>
<a href="#gdcalert25">alert25</a>
<a href="#gdcalert26">alert26</a>
<a href="#gdcalert27">alert27</a>
<a href="#gdcalert28">alert28</a>
<a href="#gdcalert29">alert29</a>
<a href="#gdcalert30">alert30</a>
<a href="#gdcalert31">alert31</a>
<a href="#gdcalert32">alert32</a>
<a href="#gdcalert33">alert33</a>
<a href="#gdcalert34">alert34</a>
<a href="#gdcalert35">alert35</a>
<a href="#gdcalert36">alert36</a>
<a href="#gdcalert37">alert37</a>
<a href="#gdcalert38">alert38</a>
<a href="#gdcalert39">alert39</a>
<a href="#gdcalert40">alert40</a>
<a href="#gdcalert41">alert41</a>
<a href="#gdcalert42">alert42</a>
<a href="#gdcalert43">alert43</a>
<a href="#gdcalert44">alert44</a>
<a href="#gdcalert45">alert45</a>
<a href="#gdcalert46">alert46</a>
<a href="#gdcalert47">alert47</a>
<a href="#gdcalert48">alert48</a>
<a href="#gdcalert49">alert49</a>
<a href="#gdcalert50">alert50</a>
<a href="#gdcalert51">alert51</a>
<a href="#gdcalert52">alert52</a>
<a href="#gdcalert53">alert53</a>
<a href="#gdcalert54">alert54</a>
<a href="#gdcalert55">alert55</a>
<a href="#gdcalert56">alert56</a>
<a href="#gdcalert57">alert57</a>
<a href="#gdcalert58">alert58</a>
<a href="#gdcalert59">alert59</a>
<a href="#gdcalert60">alert60</a>
<a href="#gdcalert61">alert61</a>
<a href="#gdcalert62">alert62</a>
<a href="#gdcalert63">alert63</a>
<a href="#gdcalert64">alert64</a>
<a href="#gdcalert65">alert65</a>
<a href="#gdcalert66">alert66</a>
<a href="#gdcalert67">alert67</a>
<a href="#gdcalert68">alert68</a>
<a href="#gdcalert69">alert69</a>
<a href="#gdcalert70">alert70</a>
<a href="#gdcalert71">alert71</a>
<a href="#gdcalert72">alert72</a>
<a href="#gdcalert73">alert73</a>
<a href="#gdcalert74">alert74</a>
<a href="#gdcalert75">alert75</a>
<a href="#gdcalert76">alert76</a>
<a href="#gdcalert77">alert77</a>
<a href="#gdcalert78">alert78</a>
<a href="#gdcalert79">alert79</a>
<a href="#gdcalert80">alert80</a>
<a href="#gdcalert81">alert81</a>
<a href="#gdcalert82">alert82</a>
<a href="#gdcalert83">alert83</a>
<a href="#gdcalert84">alert84</a>
<a href="#gdcalert85">alert85</a>
<a href="#gdcalert86">alert86</a>
<a href="#gdcalert87">alert87</a>
<a href="#gdcalert88">alert88</a>
<a href="#gdcalert89">alert89</a>
<a href="#gdcalert90">alert90</a>
<a href="#gdcalert91">alert91</a>
<a href="#gdcalert92">alert92</a>
<a href="#gdcalert93">alert93</a>
<a href="#gdcalert94">alert94</a>
<a href="#gdcalert95">alert95</a>
<a href="#gdcalert96">alert96</a>
<a href="#gdcalert97">alert97</a>
<a href="#gdcalert98">alert98</a>
<a href="#gdcalert99">alert99</a>
<a href="#gdcalert100">alert100</a>
<a href="#gdcalert101">alert101</a>
<a href="#gdcalert102">alert102</a>
<a href="#gdcalert103">alert103</a>
<a href="#gdcalert104">alert104</a>
<a href="#gdcalert105">alert105</a>
<a href="#gdcalert106">alert106</a>
<a href="#gdcalert107">alert107</a>
<a href="#gdcalert108">alert108</a>
<a href="#gdcalert109">alert109</a>
<a href="#gdcalert110">alert110</a>
<a href="#gdcalert111">alert111</a>
<a href="#gdcalert112">alert112</a>
<a href="#gdcalert113">alert113</a>
<a href="#gdcalert114">alert114</a>
<a href="#gdcalert115">alert115</a>
<a href="#gdcalert116">alert116</a>
<a href="#gdcalert117">alert117</a>
<a href="#gdcalert118">alert118</a>
<a href="#gdcalert119">alert119</a>
<a href="#gdcalert120">alert120</a>
<a href="#gdcalert121">alert121</a>
<a href="#gdcalert122">alert122</a>
<a href="#gdcalert123">alert123</a>
<a href="#gdcalert124">alert124</a>
<a href="#gdcalert125">alert125</a>
<a href="#gdcalert126">alert126</a>
<a href="#gdcalert127">alert127</a>
<a href="#gdcalert128">alert128</a>
<a href="#gdcalert129">alert129</a>
<a href="#gdcalert130">alert130</a>
<a href="#gdcalert131">alert131</a>
<a href="#gdcalert132">alert132</a>
<a href="#gdcalert133">alert133</a>
<a href="#gdcalert134">alert134</a>
<a href="#gdcalert135">alert135</a>
<a href="#gdcalert136">alert136</a>
<a href="#gdcalert137">alert137</a>
<a href="#gdcalert138">alert138</a>
<a href="#gdcalert139">alert139</a>
<a href="#gdcalert140">alert140</a>
<a href="#gdcalert141">alert141</a>
<a href="#gdcalert142">alert142</a>
<a href="#gdcalert143">alert143</a>
<a href="#gdcalert144">alert144</a>
<a href="#gdcalert145">alert145</a>
<a href="#gdcalert146">alert146</a>
<a href="#gdcalert147">alert147</a>
<a href="#gdcalert148">alert148</a>
<a href="#gdcalert149">alert149</a>
<a href="#gdcalert150">alert150</a>
<a href="#gdcalert151">alert151</a>
<a href="#gdcalert152">alert152</a>
<a href="#gdcalert153">alert153</a>
<a href="#gdcalert154">alert154</a>
<a href="#gdcalert155">alert155</a>
<a href="#gdcalert156">alert156</a>
<a href="#gdcalert157">alert157</a>
<a href="#gdcalert158">alert158</a>
<a href="#gdcalert159">alert159</a>
<a href="#gdcalert160">alert160</a>
<a href="#gdcalert161">alert161</a>
<a href="#gdcalert162">alert162</a>
<a href="#gdcalert163">alert163</a>
<a href="#gdcalert164">alert164</a>
<a href="#gdcalert165">alert165</a>
<a href="#gdcalert166">alert166</a>
<a href="#gdcalert167">alert167</a>
<a href="#gdcalert168">alert168</a>
<a href="#gdcalert169">alert169</a>
<a href="#gdcalert170">alert170</a>
<a href="#gdcalert171">alert171</a>
<a href="#gdcalert172">alert172</a>
<a href="#gdcalert173">alert173</a>
<a href="#gdcalert174">alert174</a>
<a href="#gdcalert175">alert175</a>
<a href="#gdcalert176">alert176</a>
<a href="#gdcalert177">alert177</a>

<p style="color: red; font-weight: bold">>>>>> PLEASE check and correct alert issues and delete this message and the inline alerts.<hr></p>



# CloudVision Mastery Workshop


# Lab Guide



<p id="gdcalert1" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image1.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert2">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image1.png "image_tooltip")



## **Table of Contents**


[TOC]



---


# **LAB TOPOLOGY**

Each lab environment consists of a Layer 3 Leaf & Spine design. There are 2 Spine switches and 4 Leaf switches. The Leaf switches are connected in MLAG pairs. There is a single host device connected to each MLAG pair. Host-1 is simulating a single-homed device, connected on Leaf-1A and Leaf-1B on different access VLAN’s. Host-2 is acting as a dual-homed server using an LACP Port-Channel to allow for active/active sharing of workloads. 



<p id="gdcalert2" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image2.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert3">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image2.png "image_tooltip")



# **CONNECTING TO YOUR CVaaS INSTANCE**



1. Open a browser (preferably Chrome or Firefox) and go to [https://www.arista.io/](https://www.arista.io/cv). 
2. In the “**Organization**” box, enter your assigned CVaaS instance name. For example, **_rockies-training-01_**. 

    

<p id="gdcalert3" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image3.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert4">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image3.png "image_tooltip")


3. Click “**Log in with Launchpad**”

    	

<p id="gdcalert4" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image4.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert5">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image4.png "image_tooltip")


4. Enter in your assigned email address and password

    	

<p id="gdcalert5" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image5.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert6">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image5.png "image_tooltip")


5. Welcome to CloudVision!

	

<p id="gdcalert6" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image6.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert7">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image6.png "image_tooltip")


                  


# **CONTAINERS**

Containers are a logical entity used to group network devices and to define a hierarchy to which configurations can be applied. A container can contain a device, a group of devices, or other containers.  


## **Creating Container Structure**

In this lab we will be creating a Container structure for our virtual data center deployment.



1. Navigate to **Provisioning **>** Network Provisioning**
2. Right-click on the “**Tenant**” container and select **Add **> **Container**



<p id="gdcalert7" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image7.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert8">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image7.png "image_tooltip")




3. Name the new container “**DC1**” and click OK. 
4. Now, right-click on the “**DC1**” container and select **Add **>** Container**
5. Name the new container “**Spines**”



<p id="gdcalert8" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image8.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert9">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image8.png "image_tooltip")




6. Repeat steps 4 & 5 and create a new container named “**Leafs**”
7. Right-click the “**Leafs**” container and create 2 new containers named “**Leaf1**” & “**Leaf2**” (see example below)



<p id="gdcalert9" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image9.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert10">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image9.png "image_tooltip")




<p id="gdcalert10" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert11">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



8. Click “**Save**” at the bottom of the screen. Our finished container structure should look something like this:



<p id="gdcalert11" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image10.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert12">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image10.png "image_tooltip")



# **CONFIGLETS**

Configlets are a snippet of configuration that CloudVision users code and maintain independently. These configlets can be later applied to devices or containers in the topology. When you apply a configlet to a container, the configlet is automatically applied to all of the devices in the container, including devices in sub-containers. Multiple configlets can be applied to a single device or container. The collection of applied configlets create the “Designed Configuration” on the devices. 


## **Creating Static Configlets**

In this lab there will be several pre-built configlets and several that need to be built. In the steps below, we will be creating several new static configlets. We will then assign all configlets to the appropriate containers and devices.  

A note on configlet naming convention. Based on our experience helping with many large customer deployments, we are using a naming convention that we found works very well. All configlets that are assigned directly to containers will be in all-caps (i.e. **SPINES, LEAF1, LEAF2, **etc) and any configlet that is assigned directly to a device will be in all lower-case (i.e. **spine-1, spine-2, leaf-1A, leaf-1B, **etc). 



<p id="gdcalert12" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert13">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



1. Navigate to **Provisioning **>** Configlets**. In the upper right-hand corner, click on the “**+**” icon 

<p id="gdcalert13" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image11.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert14">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image11.png "image_tooltip")
and select “**Configlets**”
2. Name the new configlet “**spine-2**” and add the following configuration and click “**Save**”

    ```
hostname Spine-2
!
interface Ethernet1
   description Leaf-1A_eth2
   no switchport
   ip address 10.242.1.1/30
!
interface Ethernet2
   description Leaf-1B_eth2
   no switchport
   ip address 10.242.1.5/30
!
interface Ethernet3
   description Leaf-2A_eth2
   no switchport
   ip address 10.242.2.1/30
!
interface Ethernet4
   description Leaf-2B_eth2
   no switchport
   ip address 10.242.2.5/30
!
interface Loopback0
   ip address 10.250.0.2/32
!
interface Management1
   ip address dhcp
   dhcp client accept default-route
!
router bgp 65000
   router-id 10.250.0.2
   neighbor 10.242.1.2 peer group MLAG-1
   neighbor 10.242.1.6 peer group MLAG-1
   neighbor 10.242.2.2 peer group MLAG-2
   neighbor 10.242.2.6 peer group MLAG-2
!
```


3. Let’s create another static configlet named “**LEAF2**” and add the following configuration  and click “**Save**”

    ```
vlan 30,40
!
vlan 4093-4094
   trunk group MLAG_Peer_Link
!
interface Port-Channel1
   description Host-2
   switchport mode trunk
   mlag 1
!
interface Port-Channel2000
   description MLAG_Peer_Link
   switchport mode trunk
   switchport trunk group MLAG_Peer_Link
!
interface Ethernet3
   description MLAG-PEER-LINK
   channel-group 2000 mode active
!
interface Ethernet4
   description MLAG-PEER-LINK
   channel-group 2000 mode active
!
interface Vlan30 
   ip virtual-router address 10.30.30.1
!
interface Vlan40
   ip virtual-router address 10.40.40.1
!
ip virtual-router mac-address 00:1c:73:00:00:01
!
mlag configuration
   domain-id MLAG
   peer-link Port-Channel2000
   reload-delay 60
!
router bgp 65002
   no bgp default ipv4-unicast
   maximum-paths 2
   neighbor MLAG-PEER peer group
   neighbor MLAG-PEER remote-as 65002
   neighbor SPINES peer group
   neighbor SPINES remote-as 65000
   redistribute connected
   !
   address-family ipv4
      neighbor MLAG-PEER activate
      neighbor SPINES activate
!
```


4. Now let’s create configlets for each of our devices in the “**Leaf2**” container (**leaf-2a** &** leaf-2b**). Create a configlet named “**leaf-2a**” and add the following configuration

    ```
hostname Leaf-2A
!
interface Ethernet1
   description Spine-1_eth3
   no switchport
   ip address 10.241.2.2/30
!
interface Ethernet2
   description Spine-2_eth3
   no switchport
   ip address 10.242.2.2/30
!
interface Ethernet6
   description Host-2_eth1
   channel-group 1 mode active
!
interface Loopback0
   ip address 10.250.2.1/32
!
interface Management1
   ip address dhcp
   dhcp client accept default-route
!
interface Vlan30
   ip address 10.30.30.2/24
!
interface Vlan40
   ip address 10.40.40.2/24
!
interface Vlan4093
   description iBGP_Peering
   no autostate
   ip address 192.168.0.1/30
!
interface Vlan4094
   description MLAG_Peering
   no autostate
   ip address 192.168.1.1/30
!
mlag configuration
   local-interface Vlan4094
   peer-address 192.168.1.2
!
router bgp 65002
   router-id 10.250.2.1
   neighbor 10.241.2.1 peer group SPINES
   neighbor 10.242.2.1 peer group SPINES
   neighbor 192.168.0.2 peer group MLAG-PEER
!
```


5. Create a configlet named “**leaf-2b**” and add the following configuration

    ```
hostname Leaf-2B
!
interface Ethernet1
   description Spine-1_eth4
   no switchport
   ip address 10.241.2.6/30
!
interface Ethernet2
   description Spine-2_eth4
   no switchport
   ip address 10.242.2.6/30
!
interface Ethernet6
   description Host-2_eth2
   channel-group 1 mode active
!
interface Loopback0
   ip address 10.250.2.2/32
!
interface Management1
   ip address dhcp
   dhcp client accept default-route
!
interface Vlan30
   ip address 10.30.30.3/24
!
interface Vlan40
   ip address 10.40.40.3/24
!
interface Vlan4093
   description iBGP_Peering
   no autostate
   ip address 192.168.0.2/30
!
interface Vlan4094
   description MLAG_Peering
   no autostate
   ip address 192.168.1.2/30
!
mlag configuration
   local-interface Vlan4094
   peer-address 192.168.1.1
!
router bgp 65002
   router-id 10.250.2.2
   neighbor 10.241.2.5 peer group SPINES
   neighbor 10.242.2.5 peer group SPINES
   neighbor 192.168.0.1 peer group MLAG-PEER
!
```


6. We should now have the following list of configlets

    

<p id="gdcalert14" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image12.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert15">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image12.png "image_tooltip")




## **Assigning Configlets to Containers**

Now that we have our container structure and our static configlets built, let’s apply the configlets to our containers.



<p id="gdcalert15" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert16">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



1. Let’s start by assigning the “**BASE**” configlet to the “**DC1**” container. Navigate to **Provisioning **> **Network Provisioning**. Right-click on the “**DC1**” container and select **Manage **> **Configlet**



<p id="gdcalert16" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image13.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert17">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image13.png "image_tooltip")




2. Now select “**BASE**” from the list of configlets. You will see the “**BASE**” configlet show up on the right side of your screen under the “**Proposed Configuration**” section. You can see a preview of the configuration that will be applied by this configlet by clicking the “**+**” icon on the far right corner of the “**Proposed Configuration**” section for the “**BASE**” configlet. Click “**Update**” at the bottom of the screen.

 



<p id="gdcalert17" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image14.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert18">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image14.png "image_tooltip")




3. Next, let’s assign the “**SPINES**” configlet to the “**Spines**” container. Right-click on the “**Spines**” container and select **Manage **>** Configlet**



<p id="gdcalert18" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image15.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert19">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image15.png "image_tooltip")




4. From the list, select the “**SPINES**” configlet and click “**Update**” at the bottom of the screen



<p id="gdcalert19" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image16.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert20">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image16.png "image_tooltip")




5. Next, we’re going to assign the “**LEAF1**” configlet to the “**Leaf1**” container. Expand the “**Leafs**” container to expose the individual leafs containers. Right-click on the “**Leaf1**” container and select **Manage **>** Configlet**. Select the “**LEAF1**” configlet and click “**Update**”



<p id="gdcalert20" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image17.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert21">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image17.png "image_tooltip")




6. Repeat above steps for the “**Leaf2**” container
7. We’ve now assigned configlets to the appropriate containers. Don’t forget to click “**Save**” at the bottom of the screen
8. From the Network Provisioning screen, we can verify which configlets are assigned to the containers. Click on a container in the hierarchy, in this example we’ll highlight the “**DC1**” container. From the menu on the right side of the screen, click on the middle icon. This will show you which configlets are assigned to that container

    

<p id="gdcalert21" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image18.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert22">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image18.png "image_tooltip")




# **NETWORK PROVISIONING**

Network Provisioning allows you to manage the devices and containers in your network. You can create and delete containers, move devices between containers, and manage device configlets and images.

All devices onboarded to CloudVision are automatically assigned to the “**undefined**” Container. Before any configuration can be pushed to these devices, they must be moved to the Tenant or another container.


## **Deploying Switches**

Now that we’ve assigned configlets to containers, we can move our switches from the “**undefined**” container to their assigned containers. Remember, all container-level configlets will be inherited by the devices under those containers. 

In this lab we will provision our devices from ZTP mode, move them into their assigned containers, and apply their device-specific configlets. 



1. Navigate to **Provisioning **> **Network Provisioning** and right-click on the “**Spines**” container. Now select **Add **> **Device**



<p id="gdcalert22" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image19.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert23">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image19.png "image_tooltip")




2. Select “**Spine1**” and “**Spine2**” (denoted in the Serial Number) from the list and click “**Add**” at the bottom of the screen



<p id="gdcalert23" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image20.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert24">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image20.png "image_tooltip")




<p id="gdcalert24" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert25">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



3. Open the container hierarchy and right-click on the “**Leaf1**” container and select **Add **>** Device**
4. Select “**Leaf1A**” and “**Leaf1B**” from the list and click “**Add**”



<p id="gdcalert25" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image21.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert26">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image21.png "image_tooltip")




5. Let’s repeat the process for container “**Leaf2**”, adding “**Leaf2A**” and “**Leaf2B**”



<p id="gdcalert26" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert27">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)

We are now ready to assign our device-specific configlets to the switches themselves. 



6. Click on the “**Spines**” container and right-click on “**Spine1**”. Select **Manage **> **Configlet**



<p id="gdcalert27" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image22.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert28">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image22.png "image_tooltip")




7. Now select the “**spine-1**” configlet from the list and click “**Validate**” at the bottom of the screen 



<p id="gdcalert28" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image23.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert29">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image23.png "image_tooltip")




<p id="gdcalert29" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image24.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert30">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image24.png "image_tooltip")




8. Under the “**Designed Configuration**” pane, we should see approximately 48 New Lines, 03 Mismatch Lines, and 151 Lines To Reconcile. 

    

<p id="gdcalert30" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image25.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert31">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image25.png "image_tooltip")


9. Verify the “**Designed Configuration**” against the “**Running Configuration**”. If you’re satisfied with the proposed changes, click “**Save**” at the bottom of the screen.
10. Let’s repeat the above process for “**Spine2**” by assigning the “**spine-2**” configlet to that device. We should see the same number of proposed config changes for “**Spine2**” as we did for “**Spine1**”.
11. Now let’s assign the device-specific configlets to the Leaf switches. Click on the “**Leaf1**” container and right-click on “**Leaf1A**” and select **Manage **> **Configlet**. 



<p id="gdcalert31" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image26.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert32">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image26.png "image_tooltip")




12. Now select “**leaf-1a**” from the list of configlets and click “**Validate**” at the bottom of the screen. 



<p id="gdcalert32" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image27.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert33">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image27.png "image_tooltip")




13. Under the “**Designed Configuration**” pane, we should see approximately 77 New Lines, 03 Mismatch Lines, and 157 Lines To Reconcile. 

    

<p id="gdcalert33" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image28.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert34">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image28.png "image_tooltip")


14. Verify the “**Designed Configuration**” against the “**Running Configuration**”. If you’re satisfied with the proposed changes, click “**Save**” at the bottom of the screen.
15. Let’s repeat the above steps for “**Leaf1B**”, “**Leaf2A**”, & “**Leaf2B**” by assigning all device-level configlets to the appropriate switches. 



<p id="gdcalert34" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert35">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



16. Once all configlets have been assigned to the individual switches, we can go ahead and click “**Save**” at the bottom of the Network Provisioning screen. 
17. You should now notice that all of the switches in the Network Provisioning view still show up under the “Undefined” container.  TYou’ll now see the switches are all shown in yellow with a “**T**” in the status section, indicating that these devices have available tasks. 



<p id="gdcalert35" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image29.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert36">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image29.png "image_tooltip")


We can execute these tasks using a Change Control - which we’ll cover in the next section. Only after the tasks have been executed will the switches show up under their appropriate container structure in the Network Provisioning hierarchy.


## **Tasks & Change Controls**

Tasks in CloudVision are generated whenever there are changes made to configlets, image bundles, etc. Those Tasks are executed using a Change Control operation. A Change Control allows a user to select and execute an individual task or a group of tasks that you want to process simultaneously.

In this lab we will assign our existing Tasks to a Change Control and then execute it so that our switches will finish the Provisioning process. 



1. Navigate to **Provisioning** >** Tasks**. You should see our 6 pending “**Add Device**” Tasks. Under “**Assignable Tasks**” click the top check box next to “**ID**”. This will select all 6 tasks in the list. Now click “**Create Change Control**”



<p id="gdcalert36" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image30.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert37">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image30.png "image_tooltip")




2. Under “**Select an Arrangement**” click on “**Parallel**” and then click on “**Create Change Control with 6 Tasks**”



<p id="gdcalert37" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image31.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert38">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image31.png "image_tooltip")




3. We’re going to change the name of the Change Control to something more descriptive. This will allow us to quickly locate it later if necessary. Click on the pencil icon next to the name of the Change Control and name it, “**Adding Devices to DC1 Fabric**”



<p id="gdcalert38" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image32.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert39">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image32.png "image_tooltip")




4. In the upper right-hand corner, click on “**Review and Approve**”. Review the changes that are being applied to each device and then click “**Approve**” if you’re satisfied with the proposed changes



<p id="gdcalert39" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image33.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert40">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image33.png "image_tooltip")


While reviewing the Change Control, you’ll notice that it looks very similar to what we saw when Validating the config changes on each of the devices. Again, you can see how many “**New Lines**”, “**Mismatch Lines**”, and “**Lines To Reconcile**” are being proposed for each device. You can also click on the 

<p id="gdcalert40" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image34.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert41">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image34.png "image_tooltip")
next to each device to collapse its changes - which will provide you with a more summarized view. 



<p id="gdcalert41" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image35.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert42">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image35.png "image_tooltip")




<p id="gdcalert42" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image36.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert43">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image36.png "image_tooltip")




5. Once Approved, our Change Control should look something like this:



<p id="gdcalert43" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image37.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert44">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image37.png "image_tooltip")




<p id="gdcalert44" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert45">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



6. Now it’s time to execute our Change Control. Click on “**Execute Change Control**” in the upper right corner. In the pop-up window, we’ll click on “**Execute**”.

        

<p id="gdcalert45" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image38.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert46">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image38.png "image_tooltip")



While the Change Control is running, you can click on “**Logs**” to get real-time updates as to what actions are being executed within the Change Control. 



<p id="gdcalert46" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image39.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert47">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image39.png "image_tooltip")




<p id="gdcalert47" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image40.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert48">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image40.png "image_tooltip")


If any task in the Change Control fails, you’ll see a Red “X” next to the task. You can click on the failed task and get more details as to why the action failed. 

In the example below, we can see that switch **SN-P1-Spine1** exceeded the timeout after it was rebooted during the provisioning process. 



<p id="gdcalert48" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image41.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert49">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image41.png "image_tooltip")


If the Change Control completes with no errors or failed Tasks, then **Congratulations**, you have successfully deployed all of the switches in your DC1 fabric! 



<p id="gdcalert49" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image42.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert50">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image42.png "image_tooltip")


**** **If your Change Control failed for any reason, please reach out to an Arista team member for assistance. ******


# **COMPLIANCE UPDATES AND TOKEN**

Compliance updates automatically keep the compliance settings within CloudVision up to date.  These Compliance Updates include:



* Bug Database
* Software End-of-Life
* Hardware End-of-Life

Let’s start by configuring the token for Compliance Updates so that the items above stay current.



1. Navigate to **Settings** > **Compliance Updates** (Settings is the gear icon in the bottom left corner).



<p id="gdcalert50" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image43.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert51">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image43.png "image_tooltip")




2. In the “**Authentication Token**” box, enter the following token. 

    ```
4893c46ab1f074b733d48ddf2b60458f
```


3. Select “**Save**” to save the Token.



<p id="gdcalert51" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image44.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert52">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image44.png "image_tooltip")




<p id="gdcalert52" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert53">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)

Now that the Authentication Token has been supplied, CloudVision will periodically check for compliance updates daily. 


# **IMAGE MANAGEMENT**

Create and manage image bundles, which can be pushed to devices in Network Provisioning. Each bundle can contain an image, one or more extensions, or both. Bundling an image with extensions allows you to create a software package that can be repeatedly pushed to different devices.


## **Images and Image Bundles**

CloudVision simplifies image management for all network devices. A more recent CloudVision feature now allows users to download Arista images and extensions directly from within CloudVision, minimizing the steps required to deploy images to network devices.



<p id="gdcalert53" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert54">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)

First, we must enable the feature that allows images to be downloaded from within CloudVision.



1. Let’s navigate to **Settings **> **General Settings.**
2. The General Settings page has a section called “**Features**” On the right side of your screen. Let’s enable the “**Upload and Download Images and Extensions**” feature.



<p id="gdcalert54" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image45.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert55">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image45.png "image_tooltip")




3. Now let’s Navigate to **Provisioning **>** Image Repository **>** Upload and Download Images**



<p id="gdcalert55" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image46.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert56">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image46.png "image_tooltip")




4. In the upper right corner, select “**Download Images**”
5. A pop-up window will appear showing the available images to be downloaded.
6. Expand **EOS-USA **>** Active Releases **>** 4.31 **>** EOS-4.31.3M  **



<p id="gdcalert56" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image47.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert57">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image47.png "image_tooltip")




7. Typically, you would click on the blue cloud icon to download an image, but we don’t need to download any images for this lab.



<p id="gdcalert57" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert58">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



8. Now that the image is downloaded, we need to create the Image Bundle that can be assigned to devices. Head to **Provisioning **>** Image Repository**.
9. Click on the “**+**” icon near the top of the right side of the screen.



<p id="gdcalert58" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image48.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert59">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image48.png "image_tooltip")




10. In the “**Name**” field, enter a meaningful name for the image.  For this lab, we’ll use “**vEOS-4.31.3M**”.



<p id="gdcalert59" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image49.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert60">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image49.png "image_tooltip")




11. To add the Image to the Image Bundle, you can select either the large disk icon in the center of the page or the smaller disk icon on the upper right side of the screen.
12. An “**Images**” dialog box will appear.  Select **vEOS-4.31.3M.swi** and then select the “**Add**” button.



<p id="gdcalert60" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image50.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert61">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image50.png "image_tooltip")




13. You’ll be returned to the “**Create Image Bundle**” page and should see the Image you just added. Click the “**Save**” button to save the image bundle.



<p id="gdcalert61" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image51.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert62">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image51.png "image_tooltip")




14. The **vEOS-4.31.3M** image bundle will now appear in the Image Repository



<p id="gdcalert62" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image52.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert63">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image52.png "image_tooltip")



## **Image Assignment**

Now that an Image Bundle has been created, we can assign it to the devices in the topology.



1. Let’s start by navigating to **Provisioning **>** Network Provisioning**
2. Right-click on the “**DC1**” container and select **Manage **>** Image Bundle**



<p id="gdcalert63" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image53.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert64">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image53.png "image_tooltip")




3. Select the one created in the previous step, **vEOS-4.31.3M**, from the available image bundles.
4. Select the “**Update**” button at the bottom of the screen to assign the Image Bundle to all devices in the DC1 container.



<p id="gdcalert64" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image54.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert65">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image54.png "image_tooltip")




5. You will now see a green hue surrounding the “**DC1**” container and the switches under the “**DC1**” hierarchy, indicating that changes must be saved. Click the “**Save**” button at the bottom of the screen to save the image assignment changes.



<p id="gdcalert65" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image55.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert66">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image55.png "image_tooltip")




6. You’ll now see the switches are all shown in yellow with a “**T**” in the status section, indicating that these devices have available tasks. 



<p id="gdcalert66" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image56.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert67">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image56.png "image_tooltip")




7. On the left side of the screen, select “**Tasks**.” You should see 6 pending tasks, one for each device in the topology.
8. Select the 6 “**Upgrade Image**” tasks in the “**Assignable Tasks**” section.



<p id="gdcalert67" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image57.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert68">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image57.png "image_tooltip")




9. Now, we need to create a change control with those tasks, so select the “**+ Create Change Control**” button at the top of the screen.
10. The “**Create Change Control**” screen should pop up.  Ensure all 6 tasks are selected and that “**Series**” is chosen.  Then, choose “**Create Change Control with 6 Tasks**” on the top left of the pop-up.



<p id="gdcalert68" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image58.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert69">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image58.png "image_tooltip")




11. You’ll then be taken to the change control screen.  Let’s continue by giving the change control a meaningful name.  At the top of the change control where it says “**Name,**” click the little pencil icon and enter “**4.31.3 Image Upgrade**” and press enter.



<p id="gdcalert69" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image59.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert70">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image59.png "image_tooltip")


As you can see in the change control, every device in our topology will be upgraded in series. While that might look good, it’s not an optimal upgrade process for our environment. For example, how do we know that MLAG Health is in a good state so we don’t have an outage during the upgrade? How do we know that the MLAG timers have been completed and the switch is back online before taking down its peer for the upgrade?  Let’s leave the change control as is for now and return to it once we’ve completed the following steps.


# **ACTION BUNDLES**

An action bundle is a collection of actions that are applied to the stage rule(s) of a change control template. The template is then used in a change control action, to organize the tasks into logical steps as administratively defined.where the actions contained in its action bundles are executed

Each action bundle can contain up to one task action and an unlimited number of non-task actions. You can apply the same action bundle to multiple change control templates.


## **Create an Action Bundle for the Leafs**

Let’s create a new action bundle for our Leafs that can help us do MLAG validation as part of the upgrade process.



1. Start by navigating to **Provisioning **>** Action Bundles**.
2. Select “**New Action Bundle**”.



<p id="gdcalert70" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image60.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert71">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image60.png "image_tooltip")




3. In the “**Bundle Name**” field, enter a meaningful description for this action bundle.  This Action Bundle will be used for Leaf upgrades, so we’ll use the name “**Leaf Upgrade Action Bundle.**”



<p id="gdcalert71" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image61.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert72">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image61.png "image_tooltip")




4. Select the “**Add action**” dropdown box and choose the “**Lightweight Check MLAG Health**” action. 



<p id="gdcalert72" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image62.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert73">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image62.png "image_tooltip")




5. In the “**DeviceID**” section, choose the “**Provide via template**” option and set the “**checkDuration**” to 600 (5 Minutes).



<p id="gdcalert73" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image63.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert74">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image63.png "image_tooltip")




<p id="gdcalert74" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert75">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



6. Select the “**Add action**” dropdown box and select the “**Execute Task**” action.

     




<p id="gdcalert75" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image64.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert76">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image64.png "image_tooltip")




7. Select the “**Add action**” dropdown box again and select the “**Lightweight Check MLAG Health**” action. 
8. In the “**DeviceID**” section, choose the “**Provide via template**” option and set the “**checkDuration**” to 600 (5 Minutes).



<p id="gdcalert76" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image65.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert77">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image65.png "image_tooltip")




9. Select the “**Series**” option so that the actions in this Action Bundle are in series.
10. Select “**Save**” once the Action Bundle looks like the one in the screenshot below.



<p id="gdcalert77" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image66.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert78">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image66.png "image_tooltip")



## **Create an Action Bundle for the Spines**

Now, let's repeat the process we just went through with a few changes tailored to the Spines.  Since the Spines aren’t in an MLAG pair, we don’t need to do the MLAG Health Check, but we can use BGP Maintenance Mode since all the peers are running BGP and support the BGP GSHUT community.



1. Let’s start by creating a new Action Bundle.  Click “**New Action Bundle**” on the top right of the screen. 



<p id="gdcalert78" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image67.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert79">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image67.png "image_tooltip")




2. In the “**Bundle Name**” field, enter a meaningful description for this action bundle.  This Action Bundle will be used for Spine upgrades, so we’ll use the name “**Spine Upgrade Action Bundle**.”



<p id="gdcalert79" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image68.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert80">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image68.png "image_tooltip")




3. Select the “**Add action**” dropdown box and select the “**Enter BGP Maintenance Mode**” action. 
4. In the “**DeviceID**” section, choose the “**Provide via template**” option.



<p id="gdcalert80" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image69.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert81">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image69.png "image_tooltip")




<p id="gdcalert81" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert82">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



5. Select the “**Add action**” dropdown box and select the “**Execute Task**” action. 



<p id="gdcalert82" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image70.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert83">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image70.png "image_tooltip")




6. Select the “**Add action**” dropdown box again and select the “**Exit BGP Maintenance Mode**” action. 
7. In the “**DeviceID**” section, choose the “**Provide via template**” option.



<p id="gdcalert83" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image71.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert84">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image71.png "image_tooltip")




8. Select “**Series**” so that the actions in this Action Bundle are in series.
9. Select “**Save**.”



<p id="gdcalert84" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image72.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert85">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image72.png "image_tooltip")



## **Create an Action Bundle to Cleanup the Flash**

The final action bundle that we’ll create will remove the old images from Flash so we can keep the Flash nice and tidy and not have old images hanging around forever.



1. Select “**New Action Bundle**”
2. In the “**Bundle Name**” field, enter a meaningful description for this action bundle. This Action Bundle will be used to clean up the flash, so we’ll use “**Clean Flash**.”



<p id="gdcalert85" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image73.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert86">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image73.png "image_tooltip")




3. Select the “**Add action**” dropdown box and select the “**Clean Flash**” action. 
4. In the “**DeviceID**” section, choose the “**Provide via template**” option.
5. In the “**FileSpecAndGlob**” section, enter:

    ```
flash:*.swi
```


6. Select “**Save**.”



<p id="gdcalert86" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image74.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert87">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image74.png "image_tooltip")




7. You should now see the three Action Bundles that have been created.



<p id="gdcalert87" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image75.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert88">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image75.png "image_tooltip")



# **TEMPLATES**

A change control template is used as a structure for repeatable change control operations. It enables you to complete common and frequent changes in your network without needing to configure the details of the change control operation each time.

Two elements are used to construct a change control template, action bundles, and templates. Once a template has been created, you can then use it in all future change control operations.


## **Create a Template**



1. The first thing we need to do is navigate to **Provisioning **>** Templates**. 
2. Create a new template by selecting “**+ New Template**”.



<p id="gdcalert88" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image76.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert89">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image76.png "image_tooltip")




3. The “**New Template**” dialog box should appear.  Enter a name for the new template.  Since this template will be for upgrades, let’s call it “**EOS Upgrades**.”
4. Click “**Save**.”



<p id="gdcalert89" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image77.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert90">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image77.png "image_tooltip")




5. Next, you’ll be taken to a page where you can define the template options. 



<p id="gdcalert90" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image78.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert91">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image78.png "image_tooltip")




6. Now, let’s add the first stage to the Template.  On the right side of the page, select “**+ Add Stage Rule**”.



<p id="gdcalert91" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert92">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



7. Click on the pencil icon next to the “**Stage Rule Name**” of the first stage rule and name it “**Upgrade B Leafs**.”  As you can probably tell from the name, this stage will only be used to upgrade the B Leafs.
8. Since we’ll upgrade the Leafs in this Template stage, choose “**Leaf Upgrade Action Bundle**” in the “**Action Bundle**” dropdown. 
9. In the “**Device Filter**” dropdown, change the selection to “**Tag Query**.”
10. In the box just to the right of the “**Tag Query**” dropdown, we must select Leaf-1B and Leaf-2B.  To do this, type “**Device:**” and choose Leaf-1B from the dropdown followed by a “**,**” then select Leaf-2B.



<p id="gdcalert92" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert93">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



11. Change the “**Arrange Bundles**” dropdown from “**Series**” to “**Parallel**” so that this action can be run on both B switches at the same time.



<p id="gdcalert93" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image79.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert94">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image79.png "image_tooltip")




12. Repeat the steps completed for the “**Upgrade B Leafs**” stage, but for “**Upgrade A Leafs**.”  Be sure to select both Leaf-1A and Leaf-2A in the Tag Query. 



<p id="gdcalert94" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image80.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert95">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image80.png "image_tooltip")




13. Now that the stages for the Leafs are complete, we can create the next stage, which will be used to upgrade the spines. Click on “**+ Add Stage Rule**” once again.
14. Change the name of the stage to “**Upgrade Spines**.”
15. For the “**Action Bundle**,” we need to use the “**Spine Upgrade Action Bundle**”.
16. The Tag Query will be a bit different, we will use the “**Container**” tag for the Spines since both Spines are in the same container in Network Provisioning.  Enter “**Container: Spines**” in the Tag Query field.
17. We'll leave the Arrange Bundles dropdown as “**Series**” because we want to upgrade one Spine at a time.



<p id="gdcalert95" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image81.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert96">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image81.png "image_tooltip")




18. Add a final stage to the Template to clean the flash. We’ll name it “**Clean Flash**”. This will remove the old EOS Image after all the upgrades are completed. Select the “**Clean Flash**” action bundle created in the previous section in the Action Bundle dropdown.
19. The “**Device Filter**” can remain unchanged because we want to clean the flash on all the devices in the change control as part of this stage in the Template.
20. Change the “**Arrange Bundles**” dropdown from “**Series**” to “**Parallel**” so that this action can be run on all devices simultaneously.



<p id="gdcalert96" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image82.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert97">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image82.png "image_tooltip")




21. Change the “**Stage Rules**” section at the top left of the page to “**Series**” so all stages in the template happen in series.
22. Click on “**Save Template**” on the top right of the screen.



<p id="gdcalert97" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image83.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert98">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image83.png "image_tooltip")


Now that the Action Bundles and Upgrade Template have been created, they can be added to the change control created previously.



23. Head over to **Provisioning **>** Change Control**.
24. Select the “**4.31.3 Image Upgrade**” Change Control.



<p id="gdcalert98" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image84.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert99">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image84.png "image_tooltip")




25. Once in the change control, click the blue “**Select a Template**” dropdown box.
26. In the “**Change Control Template**” dialog box, select the “**EOS Upgrades**” Template created in the previous section.
27. Select “**Apply Template**”.



<p id="gdcalert99" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image85.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert100">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image85.png "image_tooltip")


The change control will reflect what was defined in the upgrade template. While expanding the newly added stages and looking at the change control, remember that the green circle with the arrow in the center means that the action will be completed in series, and the purple circle with the two parallel lines means that those actions will be completed in parallel.



<p id="gdcalert100" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image86.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert101">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image86.png "image_tooltip")




28. Expand each stage of the change control by Clicking the “**+**” next to each stage.
29. Validate that your change control looks similar to the screenshot below.



<p id="gdcalert101" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image87.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert102">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image87.png "image_tooltip")


Now that the change control has been updated using the template, it can be executed as is. However, there’s a process that can be used to preload the images on the devices to minimize upgrade times during a maintenance window. 



30. On the bottom right section of the change control, click on “**Image Changes**”



<p id="gdcalert102" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image88.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert103">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image88.png "image_tooltip")




31. Select the blue “**Preload Images**” button.
32. A “**Preload Software Images**” dialog box appears. From here, the number of Parallel Downloads, which can be 6 for the lab, can be specified.
33. Click “**Create Change Control**” to generate a new change control to preload the images on all devices. 



<p id="gdcalert103" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image89.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert104">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image89.png "image_tooltip")




34. CloudVision will redirect you to the new “**Preload Images: 4.31.3M Upgrade**” change control.
35. Select “**Review and Approve**” in the upper right corner to review the change control.



<p id="gdcalert104" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image90.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert105">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image90.png "image_tooltip")




36. The “**Review Change**” pop-up will appear and show no changes to the device are being made.  This is expected because we’re just transferring the EOS image to the device, so no actual changes are being made.
37. Once satisfied with the change control review, select “**Approve**.”



<p id="gdcalert105" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image91.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert106">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image91.png "image_tooltip")




38. Select the blue “**Execute Change Control**” button.



<p id="gdcalert106" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image92.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert107">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image92.png "image_tooltip")




39. An “**Execute Change Control**” pop-up will appear.  Select **Execute **to begin the change control execution.



<p id="gdcalert107" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image93.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert108">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image93.png "image_tooltip")




40. The change control animations will appear next to each task in the change control, showing that all tasks are being executed. 



<p id="gdcalert108" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image94.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert109">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image94.png "image_tooltip")




41. As the tasks are complete, a green check will appear at the right of each task. Once the change control has been completed, a green “**Success**” message/label will appear to the right of the change control name.



<p id="gdcalert109" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image95.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert110">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image95.png "image_tooltip")




42. The upgrade change control can be executed now that the EOS images have been preloaded onto all devices. Head to **Provisioning **>** Change Control** and select the upgrade change control, which is named “**4.31.3M Image Upgrades**.”



<p id="gdcalert110" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image96.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert111">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image96.png "image_tooltip")




43. Select the blue “**Review and Approve**” button in the upper right corner.



<p id="gdcalert111" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image97.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert112">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image97.png "image_tooltip")




44. The “**Review** **Change”** pop-up will appear for this change control and should indicate that EOS is being upgraded.  The changes for each of the 6 devices should be grouped together because all 6 devices are running the same version of EOS and are being upgraded to the same version of EOS. Select the blue “**Approve**” button to approve the changes.



<p id="gdcalert112" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image98.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert113">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image98.png "image_tooltip")




45. Select the blue “**Execute Change Control**” button in the upper right corner.



<p id="gdcalert113" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image99.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert114">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image99.png "image_tooltip")




46. An “**Execute Change Control**” pop-up will appear.  Select **Execute **to begin the change control execution.



<p id="gdcalert114" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image100.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert115">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image100.png "image_tooltip")




47. Once again, the change control animations will appear next to each task in the change control as it runs. A green check mark will appear just to the right of each task when it is completed.



<p id="gdcalert115" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image101.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert116">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image101.png "image_tooltip")




48. When the change control has been successfully completed, a green “**Success**” message/label will appear next to the change control name. 



<p id="gdcalert116" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image102.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert117">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image102.png "image_tooltip")



# **COMPLIANCE**

CloudVision continuously computes image and configuration compliances. If a device is either configuration, image, or extension non-compliant, CVP automatically generates a non-compliant event on the Compliance dashboard and flags the device as non-compliant on the Inventory screen.



1. Navigate to **Devices **>** Inventory**.

    The Inventory page will show that all devices are now running 4.31.3M but will also show a red “**Page**” icon in the “**Issues**” column that wasn’t there before the upgrade.  This icon indicates that the running configuration on the devices differs from what CloudVision thinks it should be running. This happened because “**ribd**” was the default routing model before EOS 4.30, and “**multi-agent**” was the default for EOS 4.30 and later.




<p id="gdcalert117" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert118">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



<p id="gdcalert118" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image103.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert119">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image103.png "image_tooltip")




2. Click on the red “**Page**” icon next to one of the devices. This will take you to that device’s configuration “**Compare Config**” section.



<p id="gdcalert119" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image104.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert120">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image104.png "image_tooltip")




<p id="gdcalert120" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert121">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



3. To bring the device configuration back into compliance, head to **Devices **>** Compliance Overview**



<p id="gdcalert121" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image105.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert122">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image105.png "image_tooltip")




4. Select the “**Configuration and Image**” tab near the top.



<p id="gdcalert122" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image106.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert123">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image106.png "image_tooltip")




5. Select all 6 devices that need to be brought back into compliance
6. Click the blue “**Sync Config**” button



<p id="gdcalert123" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image107.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert124">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image107.png "image_tooltip")




7. You’ll be redirected to the change control overview screen for the change control created to bring the devices back into compliance.



<p id="gdcalert124" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image108.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert125">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image108.png "image_tooltip")




8. By default, all change controls created using the “**Compliance Overview**” page will be in series.  For this lab, we want to run all changes in parallel, so select the “**Change Control Stages**” line item at the top of the screen in the section showing the tasks to be executed. Once the “**Change Control Stages**” line is highlighted, select the “**Parallel**” button on the right side of the screen just under the “**Change Control Summary**.”
9. Select the blue “**Review and Approve**” button on the top right of the screen.



<p id="gdcalert125" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image109.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert126">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image109.png "image_tooltip")




10. The “**Review Change**” pop-up will appear, showing a single configuration change on all 6 devices.  Select the blue “**Approve**” button to approve the change control.



<p id="gdcalert126" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image110.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert127">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image110.png "image_tooltip")




11. Select the blue “**Execute Change Control**” button on the top right.



<p id="gdcalert127" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image111.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert128">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image111.png "image_tooltip")




12. The “**Execute Change Control**” pop-up will appear. Select the “**Execute**” button to continue.



<p id="gdcalert128" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image112.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert129">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image112.png "image_tooltip")




13. Once completed, green check marks will appear next to each task, and the green “**Success**” icon will appear to the right of the change control name.



<p id="gdcalert129" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image113.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert130">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image113.png "image_tooltip")



# **DASHBOARDS**

CloudVision allows you to create customizable dashboards consisting of multiple metrics across various datasets in different views. You can quickly resize and drag widgets on the grid to accommodate various custom layouts views. Data is gathered from the real-time telemetry data that the Arista switches are streaming to CVP.


## **Creating Custom Dashboards**

In this lab we will be creating a custom dashboard that will be used as an overall network status page that can be used in a NOC as a visual representation for the overall state of the network. 



1. Navigate to the Dashboards section of CloudVision, and click on the **“New Dashboard**” button.

    

<p id="gdcalert130" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image114.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert131">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image114.png "image_tooltip")
   


           


    

<p id="gdcalert131" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image115.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert132">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image115.png "image_tooltip")


2. Rename your dashboard to “&lt;**FirstName_LastInitial_NOC**”. Select **Inputs** > **Single tag** from the dropdown menu on the right. Then click on the “**3 dots (...) > Configure”** for your input field.

    

<p id="gdcalert132" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image116.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert133">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image116.png "image_tooltip")


3. Configure the Single Tag Panel with the name “**Container**”. Select “**Container**” as the “**Tag Label**”, and select “**DC1**” as the default value, close the configuration panel.



<p id="gdcalert133" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image117.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert134">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image117.png "image_tooltip")


4. Insert a new graph by selecting “**Metrics**” from the drop down on the right, then select “**Table**”.

        

<p id="gdcalert134" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image118.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert135">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image118.png "image_tooltip")


5. Configure this graph with the “**CPU > CPU Utilization**”, “**Memory > Memory Usage**”, “**MLAG > MLAG Status**”, and “**Telemetry > Streaming Latency + Streaming Status**” options in the picture below. Then sort by “**CPU**” > “**Descending**”, close the configuration panel.



<p id="gdcalert135" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image119.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert136">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image119.png "image_tooltip")


6. Insert a new graph by selecting “**Summaries**” and then “**Events**”.

    

<p id="gdcalert136" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image120.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert137">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image120.png "image_tooltip")


7. The preconfigured values for the “**Events**” dashboard are already correct.  
8. Insert a new graph by selecting “**Metrics**” then “**Horizon Graph**”.
9. Select “**Interfaces**” as your Data Source, “**Single Metric for Multiple Sources**” as the View type, “**RX Traffic Rate** > **Bitrate In**” as your Metric, and “**Device** > *****” as your Dataset, close the configuration panel.

    

<p id="gdcalert137" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image121.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert138">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image121.png "image_tooltip")


10. Insert a new graph by selecting “**Summaries**” then “**Compliance**”.
11. Select “**Configuration Compliance**” for your Compliance Metric, close the configuration panel.
12. Insert another Compliance graph by selecting “**Summaries**” then “**Compliance**”.
13. Select “**Bug Exposure**” for your Compliance Metric, close the configuration panel.
14. Insert a new graph by selecting “**Metrics**” then “**Table**”
15. Select the “**Routing** > **ARP Table Size** +** IPv4 Total Route Count**”, “**Switching >** **Configured VLANs**”, “**MAC Addresses Learned**”, and “**Total VLANs**”, close the configuration panel

    

<p id="gdcalert138" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image122.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert139">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image122.png "image_tooltip")


16. Insert a new graph by selecting “**Metric**” then “**Table**”
17. Select “**Interfaces**” as the Data Source, then select “**LANZ**” and all suboptions, the sort by “**LANZ Queue Length**” and “**Descending**”, close the configuration panel

    

<p id="gdcalert139" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image123.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert140">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image123.png "image_tooltip")


18. The prior “**LANZ**” Dashboard is for instruction and will not be functional due to the lab running on **vEOS**, as this feature can only be run on hardware. We will demonstrate the **LANZ** feature in a later section of the Workshop. 
19. Insert a new graph by selecting “**Summaries**” and then “**Traffic Flows**”
20. The default values for the “**Traffic Flows**” dashboard are already correct
21. Organize the dashboard panes as you see fit by dragging and dropping them on the page.
22. Your Dashboard should appear similar to the example below:.

    

<p id="gdcalert140" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image124.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert141">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image124.png "image_tooltip")




# **EVENTS & NOTIFICATIONS**

CloudVision Events and Notifications allow users to configure alerts for network events and receive notifications about them. Users can access the events screens by clicking the Events tab, which provides an overview of network events and allows users to change the time range and filter events. Users can also click on an event to view more details, acknowledge it to hide it, or export the events to a CSV file. 



1. Navigate to the “**Events**” section of CloudVision

    

<p id="gdcalert141" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image125.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert142">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image125.png "image_tooltip")



By default, CloudVision “**Events**” are graphically displayed for the selected time period using colors to denote the severity of the event. The time period selection can be changed using the drop down near the top right corner of the graph. 



<p id="gdcalert142" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image126.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert143">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image126.png "image_tooltip")


Swap views from the “**Event Chart”** to the “**Summary Tables**” using the toggle in the top right corner of the “**Summary Events”** pane. This allows you to view events by device and severity level for this time period, instead of viewing events by time and severity level. 



<p id="gdcalert143" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image127.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert144">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image127.png "image_tooltip")


There are many ways to filter the viewable events in CloudVision by using the “**Event Filters**” on the right side of the screen:


    **<span style="text-decoration:underline;">Time</span>**: Custom date and time periods can be selected instead of using only the current time.


    **<span style="text-decoration:underline;">Severity</span>**: Events can be filtered based on severity level.


    **<span style="text-decoration:underline;">Description</span>**: Events can be filtered based on matching text.


    **<span style="text-decoration:underline;">Type</span>**: Events can be filtered based on the pre-built event types within CloudVision.


    **<span style="text-decoration:underline;">Tags</span>**: Events can be filtered based on pre-built or custom user created Tags.


    **<span style="text-decoration:underline;">State</span>**: Events can be filtered based on whether they are Acknowledged or Unacknowledged.


    **<span style="text-decoration:underline;">Status</span>**: Events can be filtered based on whether they are currently Active or Ended.



<p id="gdcalert144" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image128.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert145">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image128.png "image_tooltip")




2. Reset any existing filters, then filter based on “**reboot**” using the “**Description”** field. 

    

<p id="gdcalert145" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image129.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert146">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image129.png "image_tooltip")


3. Click on one of the “**Device Rebooting**” events in the “**Event List**”. (If your lab doesn’t contain a Device Rebooting event yet, you can follow along using the screenshots in the next section) 

    

<p id="gdcalert146" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image130.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert147">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image130.png "image_tooltip")



Clicking on an event provides custom details based on the event type:


     


    **Time period**: The exact time the event occurred is located at the top left. The overall time period from the event becoming active to when it ended is also displayed at the bottom of the screen.


    **Metrics**: Based on the event type, specific metrics and graphs will be displayed providing more details


    **Logs**: Syslog information from the device will be displayed and can be filtered based on search


    

<p id="gdcalert147" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image131.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert148">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image131.png "image_tooltip")



    

<p id="gdcalert148" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image132.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert149">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image132.png "image_tooltip")



## **CloudVision Event Generation**



1. Navigate to “**Events**”, then click on the “**Event Generation**” button near the top right corner

    

<p id="gdcalert149" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image133.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert150">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image133.png "image_tooltip")



    The “**Event Generation**” page allows you to edit any of the pre-built events types within CloudVision. Let’s review some of the important fields:


        **Threshold**: The value that must be reached before the event will trigger


        **Raise Time**: The time period the threshold value must be met before the event will trigger


        **Clear Time**: The time period the threshold value must be false before an Active event will end


    

<p id="gdcalert150" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image134.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert151">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image134.png "image_tooltip")


2. In the search field for “**Event type name**”, type “**CPU**” then click on “**CPU Utilization Breached Threshold**” event type

    The pre-built “**CPU Utilization Breached Threshold**” event type is set to trigger a **Warning** event if the CPU Utilization exceeds 85% for more than 30 seconds. We’re going to create an additional rule for this event that triggers an **Error** event for more serious situations where the CPU Utilization exceeds 90% for more than 60 seconds. 

3. Click on “**Add Rule**”, then perform the following steps:
    1. Check the box for “**Generate an Event**”.
    2. Change the “**Severity**” level to “**Error**”.
    3. Set the “**Threshold**” value to “**90**”.
    4. Set the “**Raise Time**” value to “**60**”.
    5. Uncheck the box for “**Ignore Subsequent Rules**”.
    6. Click “**Save**” in the top right corner. 



<p id="gdcalert151" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image135.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert152">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image135.png "image_tooltip")



## **CloudVision Event Notifications**



1. Go back to the “**Events**” page, then click on the “**Notifications**” button near the top right



<p id="gdcalert152" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image136.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert153">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image136.png "image_tooltip")




2. Select the “**Platforms**” option for “**Notification Configuration**” on the left hand side of your screen.

    

<p id="gdcalert153" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image137.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert154">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image137.png "image_tooltip")



    The “**Platforms**” configuration is where you can add additional notification platforms for CloudVision to send event notification alerts to when events are triggered. CloudVision supports many different platforms such as **Email**, **Slack**, **Zoom**, and **PagerDuty**. Additional platform options are regularly added with each new CloudVision update. 


    Most of these can be added fairly easily via the webhook URL for the specific application platform in question. Let’s add two additional platforms this way. 

3. Add the following URL for the “**Google Chat**” webhook: [https://chat.googleapis.com/v1/spaces/AAAAwXYY1tc/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=cKsl1s8vlpL-YTzSObdOgS-eAA2TAdyp--NMz79KdQs](https://chat.googleapis.com/v1/spaces/AAAAwXYY1tc/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=cKsl1s8vlpL-YTzSObdOgS-eAA2TAdyp--NMz79KdQs)
4. Add the following URL for the “**Slack**” webhook: [https://hooks.slack.com/services/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](https://hooks.slack.com/services/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)



<p id="gdcalert154" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image138.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert155">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image138.png "image_tooltip")



    Now that we have added two new platforms for event notifications, we need to configure the “**Notification Receivers**” that we want to use for our event alerting. 



5. Navigate to the “**Receivers**” sections in** **“**Notification Configuration**”.

    

<p id="gdcalert155" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image139.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert156">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image139.png "image_tooltip")


6. Click on “**Add Receiver**” and configure three different “**Notification Receivers**”. One for “**Google Chat**”, another for “**Slack**”, and a final one that includes **Both**. Click “**Add Configuration**” and select the corresponding items from the drop down menu for each receiver.

    

<p id="gdcalert156" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image140.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert157">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image140.png "image_tooltip")



    You’ve now added two new event “**Platforms**” - Google Chat and Slack, and you’ve created three different groups of “**Receivers**” - Google Chat, Slack, and both Google Chat + Slack. The final step is to add the event “Rules” for which “**Receiver**” groups will be used for different events. 

7. Navigate to the “**Rules**” section of “**Notification Configuration**”.

    

<p id="gdcalert157" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image141.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert158">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image141.png "image_tooltip")



    We will now configure three different “**Rules**” that use the “**Receivers**” we just created to highlight how this process works during testing later.

8. For the first rule, we are going to select “**Spine-1**” as our “**Device**”, and “**Google**” as our “**Receiver”**. 

    

<p id="gdcalert158" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image142.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert159">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image142.png "image_tooltip")


9. For the second rule, we are going to select “**Spine-2**” as our “**Device**”, and “**Slack**” as our “**Receiver**”.

    

<p id="gdcalert159" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image143.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert160">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image143.png "image_tooltip")


10. For the third and last rule, we are going to select all Leafs, and “**Both Google and Slack**” as our “**Receiver”**.

    

<p id="gdcalert160" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image144.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert161">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image144.png "image_tooltip")


11. Click “**Save**” in the upper right hand corner.

    We’ve set up everything required for event notifications. We can now test if our notifications are working correctly using the “**Test Notification**” tool in the “**Status**” section of “**Notifications**”.

12. Navigate to the “**Status**” section of “**Notifications**”.

	


    

<p id="gdcalert161" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image145.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert162">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image145.png "image_tooltip")




13. We will now generate 3 different test notifications for: “**Spine-1**”, “**Spine-2**”, and any **Leaf**. Include your “**&lt;FirstName_LastInitial>**” in the “**Rule Label**’ field so you can identify your test notifications later in **Slack & Google Chat**.

    

<p id="gdcalert162" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image146.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert163">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image146.png "image_tooltip")


14. The **Google Chat** and **Slack** notifications will be displayed by your instructors.


# **ACTIONS**

Actions can be used within a change control to run a series of commands on devices. There are a number of built-in actions that can be selected when configuring a change control operation or creating a change control template. You can also create custom actions by creating arguments and writing a Python 3 script to manipulate the arguments.

When configuring a change control, you'll select the dynamic values of an argument, like the device the action will run against and the image to install. When creating a custom action, you'll use dynamic arguments, like DeviceID, to enable users to select values when configuring a change control.


## **Create an Action**



1. Navigate to **Provisioning **> **Actions.**
2. To create a new action, click on the “**+ New Action**” button at the top of the screen.



<p id="gdcalert163" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image147.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert164">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image147.png "image_tooltip")




3. A “**New Action**” pop-up will appear. In the “**Name**” field, type your initials followed by     “**- Clear Counters.**”
4. Click the blue “**Save**” button to save the new action.



<p id="gdcalert164" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image148.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert165">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image148.png "image_tooltip")




5. You’ll then be redirected to the action configuration page for the new action.



<p id="gdcalert165" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image149.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert166">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image149.png "image_tooltip")




6. We’ll first want to create some arguments for the Device and Interface for the action to be run against. To do this, click the “**Manage Arguments**” button just below the action’s name



<p id="gdcalert166" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image150.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert167">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image150.png "image_tooltip")




7. Create a new argument by selecting the “**+ Dynamic Argument**” at the bottom of the “**Manage Arguments**” section.



<p id="gdcalert167" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert168">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



8. A new line for the new argument will appear in the “**Manage Arguments**” section.  Enter the following into the new line:

    ```
Name : DeviceID
Type : Dynamic
Default : Leave Blank
Description : The ID of the device to run this script against
Required : Yes
Hidden : No
```





<p id="gdcalert168" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image151.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert169">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image151.png "image_tooltip")




9. Repeat steps 7 & 8 to create the interface argument using the following values:

    ```
Name : Interface
Type : Dynamic
Default : Leave Blank
Description : The interface number of the interface to clear counters on
Required : Yes
Hidden : No
```





<p id="gdcalert169" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image152.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert170">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image152.png "image_tooltip")




10. Click the blue “**Save Changes**” button on the right side of the screen.
11. Now that the Arguments are created, we can head to the Script section to begin writing the action. Click on the “**Edit Script**” button below the Action name. 



<p id="gdcalert170" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image153.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert171">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image153.png "image_tooltip")




12. On line 1 of the script we’ll want to identify who wrote the script.  Go ahead and enter the following on line 1, replacing “your-name-here” with your name:

    ```
# Written by your-name-here
```


13. The next thing we need to do is create a variable in the script that references the “**Interface**” argument that was created. To do that, we skip a line an then add the following on lines 3 & 4.

    ```
# Create a variable to reflect the "Interface" dynamic argument
interface = ctx.action.args.get("Interface")
```


14. Now, we need to add two different lists of commands that will need to be run on the switch. The first list will show the interface's existing counters, and the second will clear the interface counters.  Skip a line and then paste the following into lines 6 - 16:

	


```
# List of commands to show interface counters
showCountersCmds = [
   'enable',
   f'show interfaces ethernet{interface} counters'
   ]

# List of commands to clear interface counters
clearCountersCmds = [
   'enable',
   f'clear counters ethernet{interface}'
   ]
```


	



15. Validate that the script section matches the following screenshot.



<p id="gdcalert171" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image154.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert172">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image154.png "image_tooltip")




16. Let’s continue editing the script by adding some logging stating that we’re getting the values of the current interface counters.  Skip another line and then add the following to lines 18 & 19:

	


```
# Create log entry
ctx.alog(f'Getting counters for Ethernet{interface}')
```




17. Now, we can proceed with running the commands listed in the “showCountersCmds” list on the switch. To do that, add another blank line and the following to lines 21 and 22. 

	


```
# Run the list of commands to get counters
cmdResponse = ctx.runDeviceCmds(showCountersCmds)
```




18. The commands have now been run on the switch and the response has been stored in the variable  “**cmdResponse.**”  Let’s create a log entry that outputs the response.  On lines 24 - 25 add the following:

    ```
# Create a log entry of the counters
ctx.alog(f'The currect interface counters are : {cmdResponse[1]["response"]}')
```





<p id="gdcalert172" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert173">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)



19. Now that we have logged what the counters were, let’s proceed with clearing the counters.  Let’s create a blank line, then create another log entry stating that we will clear the counters.  On lines 27 - 28 enter the following:

    ```
# Create log entry before clearing the counters
ctx.alog(f'Clearing counters for Ethernet{interface}')
```


20. Let’s actually clear the counters now.  Let’s skip another line and then enter the following on lines 30 - 31:

    ```
# Run the list of commands to clear counters
cmdResponse = ctx.runDeviceCmds(clearCountersCmds)
```


21. Now that the counters are cleared let’s create another log entry stating that the counters have been successfully cleared.  To do that, let’s skip another line and add the following content to lines 33 - 34:

    ```
# Create log entry
ctx.alog(f'Counters for Ethernet{interface} Sucessfully Cleared')
```


22. For the final part of the script, let’s repeat steps 16 - 18 to get the interface's current counter values and log them.
23. Validate that the script matches the screenshot below, then click the blue “**Save Changes**” button to save the action.



<p id="gdcalert173" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image155.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert174">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image155.png "image_tooltip")




24. Now, we can proceed with testing our Action. To do so, click on the light blue “**Execute**” button.
25. An “**Execute Action**” dialog box will appear on the right side of the screen. Click “**Dynamic Argument Values**” to expand the arguments section.



<p id="gdcalert174" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image156.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert175">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image156.png "image_tooltip")




26. Let’s use Ethernet1 for this test, so specify “**1**” for the “**Interface**.”
27. In the DeviceID dropdown, select “**Leaf-1A**”
28. Next, click the blue “**Execute**” button.  



<p id="gdcalert175" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image157.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert176">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image157.png "image_tooltip")




29. As the action executes, it will provide the logging output in the pane below the “**Execute**” button. The oldest log entry will be at the bottom, so you should read the logs from the bottom up. You’ll be able to see that the current interface counters were displayed, they were then cleared, and the new counters were displayed. 



<p id="gdcalert176" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image158.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert177">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image158.png "image_tooltip")




30. Now, your custom action is available to be used within a change control.



<p id="gdcalert177" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline drawings not supported directly from Docs. You may want to copy the inline drawing to a standalone drawing and export by reference. See <a href="https://github.com/evbacher/gd2md-html/wiki/Google-Drawings-by-reference">Google Drawings by reference</a> for details. The img URL below is a placeholder. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert178">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![drawing](https://docs.google.com/drawings/d/12345/export/png)
